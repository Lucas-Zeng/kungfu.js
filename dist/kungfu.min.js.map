{"version":3,"sources":["kungfu.js"],"names":["factory","define","amd","global","bind","fn","to","nfn","nto","_fn","passedVal","returnVal","passingVal","this","sto","setTimeout","type","call","status","secret","name","kungfu","undefined","n","nameList","Error","fnQueue","go_To_Hell","clearTimeout","apply","arguments","find","prototype","hit","timeout","push","rest","plainFn","die","perform","Fn_end","result","queue","length","reduceRight","last","prev","index","pop","window"],"mappings":"CAAG,SAAUA,GAEa,kBAAXC,SAAyBA,OAAOC,IAEvCD,UAAW,WAEP,MAAOD,IAAS,KAMpBA,GAAS,IAId,SAAUG,GA4HZ,QAASC,GAAMC,EAAKC,EAAKC,EAAKC,GAE7B,GAAIC,GAAM,SAAUC,GAEnB,GAAIC,GACHC,CAgBD,OAdAC,MAAKC,IAAMC,WAAY,WAEtBJ,EAAwB,SAAZN,EAAGW,KAAkBN,EAAYL,EAAGY,KAAMJ,KAAOH,GAEzC,SAAhBG,KAAKK,SAETL,KAAKC,IAAMC,WAAY,WAEtBR,EAAIU,KAAMJ,KAAOF,IAEhBP,KAAMS,MAAqB,SAAZN,EAAIS,KAAkB,EAAIR,KAE1CJ,KAAMS,MAASP,GAEVM,EAMR,OAFAH,GAAIO,KAAO,QAEJP,EAIR,QAASU,GAAQC,GAEhB,KAAOP,eAAgBQ,IAAW,MAAO,IAAIA,GAAQD,EAErD,IAAaE,SAATF,EAAqB,CAExB,IAAK,GAAIG,KAAKC,GAEb,GAAID,IAAMH,EAET,KAAM,IAAIK,OAAO,8CAAgDL,EAAO,YAM1EI,GAASJ,GAAQP,KAEjBA,KAAKO,KAAOA,EAUb,MANAP,MAAKa,WAELb,KAAKC,IAAM,KAEXD,KAAKK,OAAS,UAEPL,KAIL,QAASc,KAUR,MARoB,QAAfd,KAAKK,SAETU,aAAcf,KAAKC,KAEnBD,KAAKK,OAAwB,cAAfL,KAAKK,OAAyB,OAASL,KAAKK,QAIpDL,KAnMX,GAAIQ,GAAS,SAAUD,GAEtB,MAAOD,GAAOU,MAAOhB,KAAMiB,YAGxBN,IAmHJ,OAjHAH,GAAOU,KAAO,SAAUX,GAEvB,MAAOI,GAASJ,IAAS,MAI1BC,EAAOW,WAENC,IAAK,SAAU5B,EAAK6B,GAUnB,MARc,kBAAP7B,IAAqBQ,KAAKa,QAAQS,MAExC9B,GAAIA,EAEJ6B,QAASA,IAIHrB,MAIRuB,KAAM,SAAUF,GAEf,GAAIG,GAAU,YAWd,OAVCA,GAAQrB,KAAO,OAEhBH,KAAKa,QAAQS,MAEZ9B,GAAIgC,EAEJH,QAASA,IAIHrB,MAIRyB,IAAK,WAEJ,MAAOX,GAAWV,KAAMJ,OAIzB0B,QAAS,SAAUC,GAElB,CAAA,GAECC,GAFGC,EAAQ7B,KAAKa,OACFb,MAAKa,QAAQiB,OAqD5B,MAlDuB,kBAAXH,IAEXE,EAAMP,MAEL9B,GAAImC,IAMNE,EAAMP,MAEL9B,GAAI,WAEHQ,KAAKK,OAAS,eAMhBuB,EAAS5B,KAAKa,QAAQiB,OAAS,EAAI9B,KAAKa,QAAQkB,YAAa,SAAUC,EAAMC,EAAMC,GAElF,OAEC1C,GAAID,EAAM0C,EAAKzC,GAAIyC,EAAKZ,QAASW,EAAKxC,GAAKwC,EAAKX,aAMjD7B,GAAI,WAIH,MAFAU,YAAYF,KAAKa,QAAQ,GAAGrB,GAAGD,KAAMS,MAASA,KAAKa,QAAQ,GAAGQ,SAEvDrB,OAMT6B,EAAMM,MAEiB,kBAAXR,IAEXE,EAAMM,MAIPnC,KAAKK,OAAS,aAEPuB,EAAOpC,GAAGY,KAAMJ,MAAQA,OAM7BV,IAEA8C,OAAO5B,OAASA,GAIbA","file":"kungfu.min.js","sourcesContent":[";( function (factory) {\r\n\r\n    if (typeof define === \"function\" && define.amd) {\r\n       \r\n        define([], function(){\r\n\r\n            return factory( false );\r\n\r\n        });\r\n\r\n    } else {\r\n\r\n        factory( true );\r\n\r\n    }\r\n    \r\n}( function( global ) {\r\n\r\n\tvar kungfu = function( name ){\r\n\r\n\t\treturn secret.apply( this, arguments );\r\n\t};\r\n\r\n\tvar nameList = {};\r\n\r\n\tkungfu.find = function( name ) {\r\n\r\n\t\treturn nameList[name] || null;\r\n\r\n\t}\r\n\r\n\tkungfu.prototype = {\r\n\r\n\t\thit: function( fn , timeout ){\r\n\r\n\t\t\ttypeof fn === 'function' && this.fnQueue.push({\r\n\r\n\t\t\t\tfn: fn,\r\n\r\n\t\t\t\ttimeout: timeout\r\n\r\n\t\t\t});\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\trest: function( timeout ) {\r\n\r\n\t\t\tvar plainFn = function(){ };\r\n\t\t\t\tplainFn.type = 'rest';\r\n\r\n\t\t\tthis.fnQueue.push({\r\n\r\n\t\t\t\tfn: plainFn,\r\n\r\n\t\t\t\ttimeout: timeout\r\n\r\n\t\t\t});\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tdie: function( ) {\r\n\r\n\t\t\treturn go_To_Hell.call( this );\r\n\r\n\t\t},\r\n\r\n\t\tperform: function( Fn_end ){\r\n\t\t\t\r\n\t\t\tvar queue = this.fnQueue,\r\n\t\t\t\tqueueLength = this.fnQueue.length,\r\n\t\t\t\tresult;\r\n\r\n\t\t\tif ( typeof Fn_end === 'function' ) {\r\n\r\n\t\t\t\tqueue.push({\r\n\r\n\t\t\t\t\tfn: Fn_end\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t}\r\n\r\n\t\t\tqueue.push({\r\n\r\n\t\t\t\tfn: function(){\r\n\r\n\t\t\t\t\tthis.status = 'completed';\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\t\t\tresult = this.fnQueue.length > 1 ? this.fnQueue.reduceRight( function( last, prev, index ) {\r\n\r\n\t\t\t\treturn {\r\n\r\n\t\t\t\t\tfn: bind( prev.fn, prev.timeout, last.fn , last.timeout ),\r\n\r\n\t\t\t\t};\t\r\n\r\n\t\t\t}) : { \r\n\r\n\t\t\t\tfn: function(){ \r\n\r\n\t\t\t\t\tsetTimeout( this.fnQueue[0].fn.bind( this ) , this.fnQueue[0].timeout ); \r\n\r\n\t\t\t\t\treturn this; \r\n\r\n\t\t\t\t} \r\n\r\n\t\t\t};\r\n\r\n\t\t\tqueue.pop();\r\n\r\n\t\t\tif ( typeof Fn_end === 'function' ) {\r\n\r\n\t\t\t\tqueue.pop();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.status = 'performing';\r\n\r\n\t\t\treturn result.fn.call( this ), this;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tif( global ) {\r\n\r\n\t   \twindow.kungfu = kungfu;\r\n\r\n\t}\r\n\t\r\n\treturn kungfu;\r\n\r\n\tfunction bind( fn , to , nfn, nto ) {\r\n\r\n\t\tvar _fn = function( passedVal ){\r\n\r\n\t\t\tvar returnVal,\r\n\t\t\t\tpassingVal;\r\n\r\n\t\t\tthis.sto = setTimeout( function() {\r\n\r\n\t\t\t\treturnVal = fn.type === 'rest' ? passedVal : fn.call( this , passedVal ) ;\r\n\r\n\t\t\t\tif( this.status === 'dead' ) return ;\r\n\r\n\t\t\t\tthis.sto = setTimeout( function() {\r\n\r\n\t\t\t\t\tnfn.call( this , returnVal );\r\n\r\n\t\t\t\t}.bind( this ) , nfn.type == 'combo' ? 0 : nto );\r\n\r\n\t\t\t}.bind( this ) , to );\r\n\r\n\t\t\treturn passingVal;\r\n\r\n\t\t}\r\n\r\n\t\t_fn.type = 'combo';\r\n\r\n\t\treturn _fn;\r\n\t\r\n\t}\r\n\r\n\tfunction secret( name ){\r\n\r\n\t\tif( !( this instanceof kungfu ) ) return new kungfu( name );\r\n\r\n\t\tif( name !== undefined ) {\r\n\r\n\t\t\tfor( var n in nameList ){\r\n\r\n\t\t\t\tif( n === name ) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tthrow new Error( 'Unable to create kungfu, because the name \"' + name + '\" is used');\r\n\r\n\t\t\t\t} \r\n\r\n\t\t\t}\r\n\r\n\t\t\tnameList[name] = this;\r\n\r\n\t\t\tthis.name = name;\r\n\r\n\t\t}\r\n\r\n\t\tthis.fnQueue = [];\r\n\r\n\t\tthis.sto = null;\r\n\r\n\t\tthis.status = 'unstart';\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n    \r\n    function go_To_Hell() {\r\n\r\n    \tifã€€( this.status != 'dead' ){\r\n\r\n    \t\tclearTimeout( this.sto );\r\n\r\n    \t\tthis.status = this.status == 'performing' ? 'dead' : this.status ;\r\n\r\n    \t}\r\n\r\n    \treturn this;\r\n\r\n    }\r\n\r\n}));"],"sourceRoot":"/source/"}